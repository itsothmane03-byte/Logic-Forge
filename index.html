<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fallacy Forge</title>
  <!-- Base stylesheet for typography and baseline utilities -->
  <link rel="stylesheet" href="styles.css">
  <style>
    /*
      Modern static quiz site with subtle scroll choreography.  
      Overrides base variables for a soft palette and refined cards.
    */
    :root{
      --bg:      #f5f8fe;
      --card:    #ffffff;
      --fg:      #0f172a;
      --muted:   #64748b;
      --line:    #e2e8f0;
      --sky-top: #d8eaff;
      --sky-mid: #f0f6ff;
      --sand-1:  #ffffff;
      --sand-2:  #f9fbff;
      --sand-3:  #f9fbff;
      --accent:  #6b78ff;
      --active-bg: var(--accent);
      --active-text:#ffffff;
    }
    body{ margin:0; font-family:system-ui, sans-serif; background:var(--bg); color:var(--fg); }
    h1,h2,h3{ margin:0; font-weight:600; }
    p{ margin:0 0 1rem; }
    /* Background with curved horizon */
    .bg{ position:fixed; inset:0; z-index:-1; overflow:hidden;
      background:
        radial-gradient(60% 35% at 50% 10%, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0) 60%),
        linear-gradient(to bottom, var(--sky-top) 0%, var(--sky-mid) 45%, transparent 45%),
        radial-gradient(100% 80% at 50% 100%, var(--sand-1) 0%, var(--sand-2) 50%, var(--sand-3) 60%);
    }
    .bg::after{
      content:""; position:absolute; bottom:-1px; left:0; width:100%; height:140px;
      background: radial-gradient(80% 160% at 50% 100%, #ffffff 0%, #ffffff 60%, transparent 80%);
      pointer-events:none;
    }
    /* Header */
    header{ display:flex; justify-content:space-between; align-items:center; padding:20px; }
    .brand{ display:flex; align-items:center; gap:8px; font-size:1.25rem; font-weight:700; }
    nav{ display:flex; gap:16px; }
    nav a{ text-decoration:none; color:var(--fg); padding:8px 12px; border-radius:8px; transition:background 0.15s; }
    nav a:hover, nav a:focus{ background:var(--accent); color:#fff; }
    nav a.active{ background:var(--accent); color:#fff; }
    /* Main wrapper */
    main{ padding:40px 20px; max-width:1200px; margin:0 auto; }
    /* Hero */
    #hero{ margin-bottom:3rem; }
    .hero-container{ display:flex; flex-wrap:wrap; gap:2rem; align-items:stretch; justify-content:space-between; }
    .hero-left{ flex:1 1 400px; }
    .hero-left h2{ font-size:clamp(2.2rem, 5vw, 3.2rem); margin-bottom:0.6rem; }
    .hero-left p{ font-size:1.125rem; color:var(--muted); max-width:45ch; }
    .hero-right{ flex:1 1 320px; }
    .hero-card{ background:var(--card); border-radius:16px; padding:24px; box-shadow:0 8px 20px rgba(0,0,0,0.05);
      height:100%; display:flex; flex-direction:column; justify-content:center; }
    .hero-card h3{ font-size:2rem; margin:0 0 0.5rem; }
/* Modern button styles */
.btn{
  --btn-bg: linear-gradient(135deg, #4f56ff 0%, #8f94fb 100%);
  --btn-shadow: 0 4px 12px rgba(0,0,0,0.1);
  display:inline-flex; align-items:center; justify-content:center;
  padding:0.75rem 1.5rem;
  border-radius:0.75rem; border:none;
  font-weight:600;
  color:#fff;
  background:var(--btn-bg);
  box-shadow:var(--btn-shadow);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}
.btn:hover{
  transform:translateY(-2px) scale(1.03);
  box-shadow:0 6px 18px rgba(0,0,0,0.15);
}
.btn:active{
  transform:translateY(0) scale(0.97);
  box-shadow:0 2px 6px rgba(0,0,0,0.08);
}
.btn-secondary{
  --btn-bg: none;
  color:#4f56ff;
  border:1px solid currentColor;
  background:#fff;
}
.btn-secondary:hover{
  background:#f5f7ff;
}

    /* Features grid */
    #features{ display:grid; grid-template-columns:repeat(auto-fit, minmax(350px, 1fr)); gap:2rem; }
    .feature-card{ background:var(--card); border-radius:16px; padding:24px; box-shadow:0 6px 16px rgba(0,0,0,0.05); display:flex; flex-direction:column; }
    .feature-card h3{ font-size:1.6rem; margin:0 0 0.5rem; }
    .feature-card p{ color:var(--muted); }
    .feature-card select, .feature-card input[type="text"], .feature-card input[type="search"], .feature-card button{ font:inherit; padding:0.5rem 0.75rem; border-radius:8px; border:1px solid var(--line); margin-top:0.5rem; }
    .feature-card button{ background:var(--accent); color:var(--active-text); border:none; cursor:pointer; }
    .feature-card button:hover{ opacity:0.9; }
    #prop, #g-prop{ margin-top:1rem; min-height:4em; }
    #fb{ margin-top:0.75rem; font-weight:600; }
    #similar{ margin-top:0.4rem; font-size:0.875rem; color:var(--muted); }
    #g-run, #g-results{ margin-top:0.75rem; }
    /* Scroll animation sections */
    .pin{ position:relative; height:220vh; }
    .pin::before{ content:""; position:sticky; top:0; display:block; height:100vh; background:
      radial-gradient(100% 60% at 50% 100%, #fff 0, #fff 60%, transparent 61%),
      linear-gradient(180deg, #bcd3ff 0%, #eaf3ff 45%, #fff 46%);
    }
    .reel{ position:sticky; top:0; height:100vh; display:flex; gap:24px; align-items:center; padding:0 8vw; will-change:transform; }
    .reel .card{ min-width:420px; padding:28px; border-radius:16px; background:var(--card); box-shadow:0 8px 24px rgba(0,0,0,0.06); border:1px solid var(--line); font-weight:600; font-size:1.2rem; }
    .diag{ padding:12vh 8vw 20vh; display:grid; gap:28px; grid-template-columns:repeat(auto-fit, minmax(260px, 1fr)); }
    .tile{ padding:24px; border-radius:16px; background:var(--card); border:1px solid var(--line); box-shadow:0 6px 16px rgba(0,0,0,0.05); opacity:0; }
    @media (prefers-reduced-motion: reduce){
      .reel, .tile{ transition:none !important; animation:none !important; }
    }
  </style>
</head>
<body>
  <div class="bg" aria-hidden="true"></div>
  <header>
    <div class="brand">
      <img src="assets/logo-icon.png" alt="Fallacy Forge logo" width="32" height="32" />
      Fallacy&nbsp;Forge
    </div>
    <nav>
      <a href="#arena" class="active">Arena</a>
      <a href="#gauntlet">Gauntlet</a>
      <a href="#library">Library</a>
    </nav>
  </header>
  <main>
    <!-- Hero Section -->
    <section id="hero">
      <div class="hero-container">
        <div class="hero-left">
          <h2>Sharpen your reasoning.</h2>
          <p>Fast drills, clean feedback and no accounts — Fallacy Forge gives you everything you need to master logical fallacies and boost your critical thinking.</p>
        </div>
        <div class="hero-right">
          <div class="hero-card">
            <h3>Jump in</h3>
            <p>Ready to train your mind? Start a practice session or browse the fallacy library.</p>
            <div class="hero-cta">
              <a href="#arena" class="btn btn-primary">Start practicing</a>
              <a href="#library" class="btn btn-secondary">Browse library</a>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- Feature cards for existing functionality -->
    <div id="features">
      <section id="arena" class="feature-card">
        <h3>Practice Arena</h3>
        <p>Pick a fallacy, get an example and decide if it fits.</p>
        <label for="label" class="sr-only">Choose fallacy</label>
        <select id="label"></select>
        <p id="prop"></p>
        <button id="submit">Check</button>
        <button id="next">Next</button>
        <p id="fb"></p>
        <p id="similar"></p>
      </section>
      <section id="gauntlet" class="feature-card">
        <h3>Gauntlet</h3>
        <p>Test yourself with a 10‑question gauntlet. Choose a seed to repeat runs.</p>
        <label for="g-seed">Seed (optional)</label>
        <input id="g-seed" type="text" placeholder="Seed" />
        <label for="g-label" style="margin-top:0.5rem;">Level</label>
        <select id="g-label"></select>
        <button id="g-start" style="margin-top:0.5rem;">Start</button>
        <div id="g-run" style="display:none;">
          <p id="g-progress"></p>
          <p id="g-prop"></p>
          <button id="g-submit">Submit</button>
        </div>
        <div id="g-results" style="display:none;"></div>
      </section>
      <section id="library" class="feature-card">
        <h3>Library</h3>
        <p>Search and filter fallacies by difficulty. Learn definitions, aliases and confusables.</p>
        <input id="lib-q" type="search" placeholder="Search name or alias" />
        <label for="lib-diff" class="sr-only">Filter by level</label>
        <select id="lib-diff" style="margin-top:0.5rem;">
          <option value="all">All levels</option>
          <option value="beginner">Beginner</option>
          <option value="intermediate">Intermediate</option>
          <option value="advanced">Advanced</option>
        </select>
        <div id="lib-list" style="margin-top:1rem;"></div>
      </section>
    </div>
    <!-- Horizontal reel scroll animation -->
    <section class="pin">
      <div class="reel" id="scroll-reel">
        <div class="card">Prompting drills</div>
        <div class="card">Spot the fallacy</div>
        <div class="card">Confidence check</div>
        <div class="card">Review &amp; hints</div>
      </div>
    </section>
    <!-- Diagonal parallax tiles -->
    <section class="diag" id="parallax-tiles">
      <div class="tile" data-x="-60" data-y="30">Definition</div>
      <div class="tile" data-x="40" data-y="-25">Examples</div>
      <div class="tile" data-x="-30" data-y="45">Tips &amp; tricks</div>
      <div class="tile" data-x="50" data-y="-20">Practice advice</div>
    </section>
  </main>
  <!-- Animation scripts (scroll-scrub and intersection observers) -->
  <script>
  // Horizontal scroll-scrub: moves the reel based on scroll progress through the pin section
  (function(){
    const pin = document.querySelector('.pin');
    const reel = document.getElementById('scroll-reel');
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if(prefersReduced) return;
    function update(){
      const rect = pin.getBoundingClientRect();
      const progress = Math.min(1, Math.max(0, (window.innerHeight - rect.top) / (rect.height + window.innerHeight)));
      const maxX = reel.scrollWidth - pin.clientWidth;
      reel.style.transform = `translate3d(${-maxX * progress}px, 0, 0)`;
    }
    window.addEventListener('scroll', update, { passive:true });
    window.addEventListener('resize', update);
    update();
  })();
  // Diagonal parallax reveal: animate tiles from offsets when they enter viewport
  (function(){
    const tiles = document.querySelectorAll('.tile');
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if(prefersReduced) return;
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if(e.isIntersecting){
          const el = e.target;
          const x = parseFloat(el.dataset.x) || 0;
          const y = parseFloat(el.dataset.y) || 0;
          el.animate([
            { transform:`translate(${x}px, ${y}px) scale(0.96)`, opacity:0 },
            { transform:'translate(0,0) scale(1)', opacity:1 }
          ], { duration:700, easing:'cubic-bezier(.2,.7,.1,1)', fill:'forwards' });
          io.unobserve(el);
        }
      });
    }, { threshold:0.2 });
    tiles.forEach(tile=> io.observe(tile));
  })();
  </script>
  <!-- Load existing JS for fallacy drills -->
  <script src="rotation.js"></script>
  <script src="app.js"></script>
</body>
</html>

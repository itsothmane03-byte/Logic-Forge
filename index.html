<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <title>Fallacy Forge Â· Logical fallacy drills</title>

  <!-- Favicon: icon-only; works for both themes -->
  <link rel="icon" type="image/png" href="assets/logo-icon.png" />

  <!-- Prevent theme flash: apply saved theme before first paint -->
  <script>
    (() => {
      try {
        const t = localStorage.getItem('ff-theme') || 'light';
        document.documentElement.setAttribute('data-theme', t);
      } catch(e){}
    })();
  </script>

  <style>
    :root{
      --radius:14px;
      --shadow:0 1px 2px rgba(0,0,0,.06), 0 10px 28px rgba(0,0,0,.08);
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      --space:12px;
      --accent:#FF6B3D;
      --accent-weak:rgba(255,107,61,.12);
    }

    /* Light */
    html[data-theme="light"]{
      --bg:#f6fbff; --card:#fff; --fg:#111; --muted:#5f6b76; --line:#e6eef5;
      --sky-top:#e8f8ff; --sky-mid:#d8f1fe;
      --sand-1:#ffebbb; --sand-2:#ffd88b; --sand-3:#f2c768;
      --tab-bg: rgba(255,255,255,.65); --tab-text: var(--fg); --tab-border: rgba(0,0,0,.15);
      --active-bg: var(--accent); --active-text:#fff;
    }
    /* Dark */
    html[data-theme="dark"]{
      --bg:#0b1720; --card:#0f2230; --fg:#EAEFF3; --muted:#A1B1BD; --line:#23313B;
      --sky-top:#0f1a25; --sky-mid:#102330;
      --sand-1:#17232f; --sand-2:#121e2a; --sand-3:#0b1621;
      --tab-bg: rgba(255,255,255,.08); --tab-text: var(--fg); --tab-border: rgba(255,255,255,.18);
      --active-bg: var(--accent); --active-text:#fff;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:var(--font); color:var(--fg); background:var(--bg);
      -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    }
    .container{max-width:980px;margin:0 auto;padding:24px 16px}

    /* ===== Hero backdrop: original image + gradient fallback =====
       Put your original background at assets/hero.jpg (or hero.png). */
    .bg{
      position:fixed; inset:0; z-index:-1;
      background:
        image-set(url('assets/hero.jpg') type('image/jpeg') 1x,
                  url('assets/hero.png') type('image/png') 1x)
          center/cover no-repeat,
        radial-gradient(60% 35% at 50% 10%, rgba(255,255,255,.20) 0, rgba(255,255,255,0) 60%),
        linear-gradient(to bottom,var(--sky-top) 0%,var(--sky-mid) 45%,#0000 45%),
        radial-gradient(100% 80% at 50% 100%, var(--sand-1) 0, var(--sand-2) 50%, var(--sand-3) 60%);
    }
<!-- Place right after <body> -->
<div class="bg" aria-hidden="true"></div>

<style>
/* ---- Tokens for the backdrop ---- */
:root{
  --sky-top:#eaf6ff;
  --sky-mid:#dff1ff;
  --sand-1:#ffe6b3; --sand-2:#ffd082; --sand-3:#f2c36a;
}
html[data-theme="dark"]{
  --sky-top:#0f1a25; --sky-mid:#102330;
  --sand-1:#17232f; --sand-2:#121e2a; --sand-3:#0b1621;
}

/* ---- Hero background: photo with gradient fallback ---- */
.bg{
  position:fixed; inset:0; z-index:-1;

  /* Fallback if image-set is unsupported */
  background:
    url('assets/hero.jpg') center/cover no-repeat,
    radial-gradient(60% 35% at 50% 10%, rgba(255,255,255,.20) 0, rgba(255,255,255,0) 60%),
    linear-gradient(to bottom,var(--sky-top) 0%,var(--sky-mid) 45%,#0000 45%),
    radial-gradient(100% 80% at 50% 100%, var(--sand-1) 0, var(--sand-2) 50%, var(--sand-3) 60%);

  /* Preferred: WebP/JPEG selection */
  background:
    image-set(
      url('assets/hero.webp') type('image/webp') 1x,
      url('assets/hero.jpg')  type('image/jpeg') 1x
    ) center/cover no-repeat,
    radial-gradient(60% 35% at 50% 10%, rgba(255,255,255,.20) 0, rgba(255,255,255,0) 60%),
    linear-gradient(to bottom,var(--sky-top) 0%,var(--sky-mid) 45%,#0000 45%),
    radial-gradient(100% 80% at 50% 100%, var(--sand-1) 0, var(--sand-2) 50%, var(--sand-3) 60%);
}

/* Optional: if you want only colors, comment out the two url/image-set lines above. */
</style>

    /* ===== Header layout: brand left, tabs centered, toggle far right ===== */
    .header{
      display:grid; grid-template-columns: 1fr auto 1fr; align-items:center;
      gap:10px; margin:8px 0 12px;
    }
    .brand{display:flex;align-items:center;gap:10px; justify-self:start}
    .brand-icon{
      height:32px; width:auto; display:block; background:transparent; /* ensure no white box */
    }
    .brand-text{font-weight:800;letter-spacing:.2px;color:var(--fg)}
    .tabs{display:flex;gap:8px;flex-wrap:wrap; justify-self:center}
    #theme-toggle{justify-self:end}

    /* Tabs style */
    .tabs .tab{
      display:inline-flex;align-items:center;justify-content:center;
      padding:8px 12px;border-radius:12px;background:var(--tab-bg);color:var(--tab-text)!important;
      border:1px solid var(--tab-border);font-weight:700;text-decoration:none;min-width:84px;
      transition:background .15s,color .15s,border-color .15s,box-shadow .15s;
    }
    .tabs .tab:hover{box-shadow:0 2px 8px rgba(0,0,0,.08)}
    .tabs .tab.active,[aria-current="page"]{background:var(--active-bg);color:var(--active-text)!important;border-color:transparent}

    /* Buttons / chips */
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;
      padding:12px 16px;border-radius:12px;border:1px solid var(--line);background:var(--card);
      color:var(--fg); box-shadow:var(--shadow); font-weight:700; cursor:pointer; text-decoration:none}
    .btn-primary{background:var(--active-bg);color:#fff;border-color:transparent}
    .chip{padding:6px 10px;border-radius:999px;border:1px solid var(--tab-border);background:var(--tab-bg);cursor:pointer}

    /* Cards / inputs */
    .card{background:var(--card);border:1px solid var(--line);border-radius:12px;box-shadow:var(--shadow);padding:16px}
    .muted{color:var(--muted)}
    .input,.select{width:100%;padding:12px;border-radius:12px;border:1px solid var(--line);
      background:rgba(255,255,255,.65);color:var(--fg)}
    .input:focus,.select:focus{border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-weak)}
    .grid{display:grid;gap:16px}
    @media (min-width:900px){ .grid.cols-2{grid-template-columns:1fr 1fr} }
    h1{font-size:clamp(28px,5vw,48px);margin:0 0 12px}
    p{margin:0 0 12px}
  </style>
</head>

<body>
  <div class="bg" aria-hidden="true"></div>

  <header class="header container">
    <!-- 1) Brand: icon (transparent) + text; NO wordmark PNG with white box -->
    <div class="brand">
      <img class="brand-icon" src="assets/logo-icon.png" alt="Fallacy Forge icon" />
      <span class="brand-text">Fallacy Forge</span>
    </div>

    <!-- 3) Tabs centered -->
    <nav class="tabs" role="tablist" aria-label="Primary">
      <a href="#arena" class="tab active" aria-current="page">Arena</a>
      <a href="#gauntlet" class="tab">Gauntlet</a>
      <a href="#library" class="tab">Library</a>
    </nav>

    <!-- 2) Toggle on extreme right -->
    <button id="theme-toggle" class="chip" title="Switch theme" aria-label="Switch theme">ðŸŒ“</button>
  </header>

  <main class="container">
    <section class="hero">
      <h1>Sharpen your reasoning.</h1>
      <p class="muted">Fast drills. Clean feedback. No accounts.</p>
      <div class="actions" style="display:flex;gap:12px;margin:12px 0 24px">
        <a href="#arena" class="btn btn-primary">Start Practicing</a>
        <a href="#library" class="btn">Browse Library</a>
      </div>
    </section>

    <section class="grid cols-2" id="arena">
      <div class="card">
        <h3>Practice Arena</h3>
        <p class="muted" style="margin-bottom:8px">Pick a fallacy, get an example, decide if it fits.</p>
        <label for="arena-select" class="visually-hidden">Choose fallacy</label>
        <select id="arena-select" class="select">
          <option selected disabled>Choose...</option>
        </select>
        <div style="display:flex;gap:8px;margin-top:12px">
          <button id="arena-check" class="btn">Check</button>
          <button id="arena-next" class="btn">Next</button>
        </div>
        <p class="muted" style="margin-top:8px">Shortcuts: <kbd>Enter</kbd> check, <kbd>Space</kbd> next</p>
      </div>

      <div class="card" id="gauntlet">
        <h3>Gauntlet</h3>
        <input id="seed" class="input" placeholder="Seed (optional)" />
        <label for="gauntlet-level" class="visually-hidden">Level</label>
        <select id="gauntlet-level" class="select" style="margin-top:8px">
          <option selected disabled>Choose...</option>
        </select>
        <div style="display:flex;gap:8px;margin-top:12px">
          <button id="gauntlet-start" class="btn btn-primary">Start</button>
          <button id="gauntlet-submit" class="btn">Submit</button>
        </div>
      </div>
    </section>

    <section id="library" class="card" style="margin-top:16px">
      <h3>Library</h3>
      <input id="search" class="input" placeholder="Search name or alias" />
      <select id="level" class="select" style="margin-top:8px">
        <option selected>All levels</option>
        <option>Beginner</option><option>Intermediate</option><option>Advanced</option>
      </select>
      <div id="library-list" style="margin-top:12px;display:grid;gap:12px"></div>
    </section>
  </main>

  <script>
    // Theme toggle
    (() => {
      const KEY='ff-theme';
      const apply = t => { document.documentElement.setAttribute('data-theme', t); localStorage.setItem(KEY, t); };
      addEventListener('DOMContentLoaded', () => {
        const btn = document.getElementById('theme-toggle');
        if (!btn) return;
        const relabel = () => btn.title = btn.ariaLabel =
          'Switch to ' + (document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark') + ' theme';
        relabel();
        btn.addEventListener('click', () => {
          const cur = document.documentElement.getAttribute('data-theme') || 'light';
          apply(cur === 'dark' ? 'light' : 'dark'); relabel();
        });
        window.__FF_theme = { apply }; // test hook
      });
    })();

    // Minimal data boot so UI isn't empty if app.js isn't loaded yet
    (function bootstrap(){
      const fallback = [
        { id:'ad_hominem', name:'Ad Hominem', level:'Beginner' },
        { id:'straw_man', name:'Straw Man', level:'Beginner' },
        { id:'false_cause', name:'False Cause', level:'Intermediate' }
      ];
      const data = (window.FF_DATA && window.FF_DATA.fallacies) || fallback;

      const arenaSel = document.getElementById('arena-select');
      const gauntletSel = document.getElementById('gauntlet-level');
      const lib = document.getElementById('library-list');

      data.forEach(f => arenaSel.add(new Option(f.name, f.id)));
      ['Beginner','Intermediate','Advanced'].forEach(l => gauntletSel.add(new Option(l,l)));
      lib.innerHTML = data.map(f => `
        <div class="card" data-id="${f.id}">
          <strong>${f.name}</strong>
          <p class="muted" style="margin:6px 0 0">Level: ${f.level}</p>
        </div>`).join('');
    })();
  </script>

  <!-- Keep if you have real logic -->
  <script src="app.js" defer></script>
</body>
</html>
